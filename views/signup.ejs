<!-- views/signup.ejs -->
<!doctype html>
<html>
<head>
    <title>Node Authentication</title>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css"> <!-- load bootstrap css -->
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css"> <!-- load fontawesome -->

<link rel="stylesheet" type="text/css" href="dicoins.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>       
	<script> 
		$(function(){
  			$("#diCoinsHeader").load("diCoinsHeader.html");   		
		});
	</script> 
    <style>
        body        { padding-top:0px; }
    </style>

<script>
    function validateForm() {
        console.log("Start form validation.");
        var x = document.forms["signupForm"]["username"].value;
        var atpos = x.indexOf("@");
        var dotpos = x.lastIndexOf(".");
        var errorMessageDiv = document.getElementById('errorMessageBox');

        if (atpos<1 || dotpos<atpos+2 || dotpos+2>=x.length) {
            console.log("Form failed.");
            errorMessageDiv.innerHTML = "Incorrect e-mail format.";
            return false;
        } else {
            //Trim any trailing pre and post spaces before submitting
            var usernamePreTrim = document.signupForm.username.value;
            var usernamePostTrim = usernamePreTrim.trim();
            document.signupForm.username.value = usernamePostTrim;
            console.log("Form passed.");
            console.log("username pretrim is: " + usernamePreTrim + ", post trim is: " + usernamePostTrim);
            errorMessageDiv.innerHTML = "";
            return true;
        }
    }
</script>

</head>
<body>
<div id="diCoinsHeader">
</div>
<div class="container">

<div class="col-sm-6 col-sm-offset-3">

    <h1><span class="fa fa-sign-in"></span> Register</h1>

    <!-- show any messages that come back with authentication -->
    <% if (message.length > 0) { %>
        <div class="alert alert-danger"><%= message %></div>
    <% } %>

    <!-- LOGIN FORM -->
    <form name="signupForm" onsubmit="return validateForm();" action="/signup" method="post">
        <div class="form-group">
            <label>Firstname</label>
            <input type="text" class="form-control" name="firstname">
        </div>
        <div class="form-group">
            <label>Lastname</label>
            <input type="text" class="form-control" name="lastname">
        </div>
        <div class="form-group">
            <label>Email</label>
            <input type="text" class="form-control" name="username">
        </div>
        <div class="form-group">
            <label>Password</label>
            <input type="password" class="form-control" name="password">
        </div>
        <div class="form-group">
            <label>Phone number (to inform you of your sales activity)</label>
            <input type="text" class="form-control" name="phonenumber">
        </div>
	<div style="color: red; font-weight:bold" id="errorMessageBox">
    	</div>
        <button type="submit" class="btn btn-warning btn-lg">Register</button>
    </form>

    <hr>

    <p>Already have an account? <a href="/login">Login</a></p>
    <p><a href="/">LabCoins home</a></p>

</div>

</div>
</body>
</html>
